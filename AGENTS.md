# 项目内智能体协作与自检规范（MCP）

本文件为江湖墨世录（wuxia-3d-prototype）项目内的智能体（Agent）工作说明与进度自检规范。其作用范围覆盖整个仓库。

## 目标与约束
- 目标：以一年期工程量对标《原神》体量的开放世界动作RPG标准，采用"原型 → 系统化 → 规模化生产"路线迭代。
- 约束：
  - 优先 Three.js 原型验证；中期支持 Unity/UE 的迁移可行性；
  - 代码与文档并进，保证每一迭代均可运行与可评审；
  - 所有大任务必须拆分为可度量的里程碑（DoD）、风险与依赖显式化。

## 智能体角色分工（概览）
- 总导演/制作人（PM/EP）：定义愿景、路线图、资源配置与风险。
- 技术总监（TD）：技术路线、性能指标、平台策略与工具链。
- 客户端负责人（3D/玩法）：场景、角色、战斗、交互、UI。
- 服务端负责人（在线/存档）：账号、进度、运营、可观测性。
- 叙事与关卡（ND/LD）：剧情、任务、节奏、探索动机。
- 美术与音频（AD/Audio）：风格基调、资产标准、混音与中间件。
- 质量与流程（QA/PD）：验收标准、测试策略、流程改进。

完整角色提示词见 `docs/prompting/AGENT_ROLES_ZH.md:1`。

## MCP 自我检测与推进机制
- 使用 CLI 的计划工具和记忆工具进行标准化自检：
  - 计划：`functions.update_plan` 用于维护任务清单与状态；
  - 反思：`functions.mcp__sequential-thinking__sequentialthinking` 用于多步思考与方案校验；
  - 记忆：`functions.mcp__memory__*` 用于记录关键结论与项目事实；
- 自检频率：
  - 日常：开发结束前更新计划与阻塞项，记录当天学习/风险；
  - 每周：对照路线图检查里程碑达成度与燃尽图；
  - 每里程碑：执行"里程碑验收清单"，产出演示与数据报告。

标准流程与范例参见 `docs/mcp/PROGRESS_TRACKING_ZH.md:1`。

## 工作产出与验收（DoD）
- 每个任务必须具备：
  - 可运行演示（或可自动化验证的脚本/测试）；
  - 文档/注释与使用说明；
  - 指标/阈值（FPS、内存、包体、崩溃率、加载时长等）；
  - 风险与回滚预案；
- 里程碑需满足：
  - 封版分支可构建、可回归；
  - 关键 KPI 达标；
  - 演示视频或交互脚本；
  - 评审纪要与后续改进项。

里程碑模板见 `docs/checklists/MILESTONE_ACCEPTANCE_ZH.md:1`。

## 代码与文档风格
- TypeScript/React/Three.js 代码遵循现有项目风格与 Prettier 配置；
- 文档以中文为主，必要处附英文术语；
- 大文件/资产请使用二进制存储策略与 LFS（如启用）。

## 路线图与一年工程量
- 一年路线图（季度/月份/冲刺/验收）见 `docs/roadmap/YEAR1_ROADMAP_ZH.md:1`；
- 每月生成 `sprints/YYMM/` 的冲刺 Backlog 与回顾笔记（可由 Agent 自动生成并归档）。

## 提交流程建议
- 功能类 PR：包含演示说明与指标对比；
- 架构类 PR：包含方案比选、权衡与迁移计划；
- 资源类 PR：包含来源、授权与压缩规范；

---
本文件为面向多智能体协同的行为准则。任何与本文件冲突的下级规范以更深层目录的 AGENTS.md 为准。
